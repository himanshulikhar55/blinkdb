<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BLINKDB-Engine: server_runner.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BLINKDB-Engine<span id="projectnumber">&#160;0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('server__runner_8cpp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">server_runner.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="blinkdb__server_8h.html">lib/blinkdb_server.h</a>&quot;</code><br />
<code>#include &quot;../../part-a/src/lib/blinkdb.h&quot;</code><br />
<code>#include &quot;../../part-a/src/lib/resp_parser.h&quot;</code><br />
<code>#include &lt;sys/epoll.h&gt;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for server_runner.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="server__runner_8cpp__incl.png" border="0" usemap="#aserver__runner_8cpp" alt=""/></div>
<map name="aserver__runner_8cpp" id="aserver__runner_8cpp">
<area shape="rect" title=" " alt="" coords="273,5,398,32"/>
<area shape="rect" href="blinkdb__server_8h.html" title=" " alt="" coords="383,88,515,115"/>
<area shape="poly" title=" " alt="" coords="355,30,421,77,418,81,352,35"/>
<area shape="rect" title=" " alt="" coords="5,179,90,205"/>
<area shape="poly" title=" " alt="" coords="312,35,225,82,80,172,77,168,222,78,309,30"/>
<area shape="rect" title=" " alt="" coords="114,179,197,205"/>
<area shape="poly" title=" " alt="" coords="324,34,181,170,178,166,321,30"/>
<area shape="rect" title=" " alt="" coords="220,179,278,205"/>
<area shape="poly" title=" " alt="" coords="332,33,265,166,260,163,327,31"/>
<area shape="rect" title=" " alt="" coords="302,179,369,205"/>
<area shape="poly" title=" " alt="" coords="338,32,338,163,333,163,333,32"/>
<area shape="rect" title=" " alt="" coords="540,80,657,123"/>
<area shape="poly" title=" " alt="" coords="377,30,525,75,524,80,376,35"/>
<area shape="rect" title=" " alt="" coords="681,80,798,123"/>
<area shape="poly" title=" " alt="" coords="398,27,519,47,666,77,665,82,518,52,397,32"/>
<area shape="rect" title=" " alt="" coords="946,179,1008,205"/>
<area shape="poly" title=" " alt="" coords="495,113,528,120,642,135,732,138,821,145,873,153,934,168,939,170,938,175,932,173,872,159,821,150,731,143,641,140,527,125,494,118"/>
<area shape="rect" title=" " alt="" coords="1032,179,1103,205"/>
<area shape="poly" title=" " alt="" coords="494,113,528,120,602,131,666,136,775,138,883,143,947,152,1020,168,1028,170,1026,175,1019,173,946,157,883,149,775,143,666,141,602,136,527,125,493,118"/>
<area shape="poly" title=" " alt="" coords="383,115,252,138,103,173,94,176,93,171,101,168,251,133,382,110"/>
<area shape="poly" title=" " alt="" coords="400,118,210,173,203,176,201,170,208,168,399,113"/>
<area shape="poly" title=" " alt="" coords="419,118,291,173,289,174,287,169,289,168,417,113"/>
<area shape="poly" title=" " alt="" coords="434,117,365,171,362,167,431,113"/>
<area shape="rect" title=" " alt="" coords="1127,179,1184,205"/>
<area shape="poly" title=" " alt="" coords="494,113,528,120,617,132,693,136,824,134,887,133,954,137,1029,147,1116,168,1121,170,1119,175,1115,173,1028,153,953,142,887,138,824,139,693,141,616,137,527,125,493,118"/>
<area shape="rect" title=" " alt="" coords="1208,179,1268,205"/>
<area shape="poly" title=" " alt="" coords="493,113,528,120,629,133,716,137,864,133,936,132,1012,135,1098,146,1198,168,1203,170,1202,175,1196,173,1097,151,1012,140,936,137,865,138,716,142,629,138,527,125,492,118"/>
<area shape="rect" title=" " alt="" coords="394,179,504,205"/>
<area shape="poly" title=" " alt="" coords="452,115,452,163,446,163,446,115"/>
<area shape="rect" title=" " alt="" coords="529,171,649,213"/>
<area shape="poly" title=" " alt="" coords="470,113,545,160,542,165,467,118"/>
<area shape="rect" title=" " alt="" coords="673,171,785,213"/>
<area shape="poly" title=" " alt="" coords="490,113,659,166,657,171,488,118"/>
<area shape="rect" title=" " alt="" coords="809,171,921,213"/>
<area shape="poly" title=" " alt="" coords="497,113,528,120,660,143,794,167,793,173,659,148,527,125,496,118"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a32c1402c1491ea6c063e45c1c5a57f10" id="r_a32c1402c1491ea6c063e45c1c5a57f10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a32c1402c1491ea6c063e45c1c5a57f10">handle_exit</a> ()</td></tr>
<tr class="separator:a32c1402c1491ea6c063e45c1c5a57f10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b3210a63df1873c78a11917bce26ff1" id="r_a5b3210a63df1873c78a11917bce26ff1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5b3210a63df1873c78a11917bce26ff1">handleSigInt</a> (int signum)</td></tr>
<tr class="separator:a5b3210a63df1873c78a11917bce26ff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97" id="r_a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top"><a id="a0ddf1224851353fc92bfbff6f499fa97" name="a0ddf1224851353fc92bfbff6f499fa97"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main</b> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the BlinkDB server application</p>
<p>This file implements the main entry point for the BlinkDB server application. It initializes a TCP socket server that listens for incoming connections and handles them using an epoll-based event loop. When running the server the user should give as the (the only one) command line arg the maximum number of parallel connections the server will be required to handle.</p>
<p>The server uses the <a class="el" href="classblinkdb__server.html">blinkdb_server</a> class to process client requests according to the RESP (Redis Serialization Protocol) format.</p>
<dl class="section note"><dt>Note</dt><dd>The server listens on the port defined by PORT macro (defined in <a class="el" href="blinkdb__server_8h.html">blinkdb_server.h</a> file). </dd>
<dd>
The server can be terminated by sending a SIGINT signal (Ctrl+C). It will then gracefully exit while collecting all the memory. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a32c1402c1491ea6c063e45c1c5a57f10" name="a32c1402c1491ea6c063e45c1c5a57f10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32c1402c1491ea6c063e45c1c5a57f10">&#9670;&#160;</a></span>handle_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handle_exit </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Handles the server exit process</p>
<p>This function is called when the server is shutting down. It prints a message and exits the process gracefully. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="server__runner_8cpp_a32c1402c1491ea6c063e45c1c5a57f10_icgraph.png" border="0" usemap="#aserver__runner_8cpp_a32c1402c1491ea6c063e45c1c5a57f10_icgraph" alt=""/></div>
<map name="aserver__runner_8cpp_a32c1402c1491ea6c063e45c1c5a57f10_icgraph" id="aserver__runner_8cpp_a32c1402c1491ea6c063e45c1c5a57f10_icgraph">
<area shape="rect" title=" " alt="" coords="147,5,234,32"/>
<area shape="rect" href="server__runner_8cpp.html#a5b3210a63df1873c78a11917bce26ff1" title=" " alt="" coords="5,5,99,32"/>
<area shape="poly" title=" " alt="" coords="131,21,99,21,99,16,131,16"/>
</map>
</div>

</div>
</div>
<a id="a5b3210a63df1873c78a11917bce26ff1" name="a5b3210a63df1873c78a11917bce26ff1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b3210a63df1873c78a11917bce26ff1">&#9670;&#160;</a></span>handleSigInt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handleSigInt </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>signum</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Signal handler for SIGINT (Ctrl+C)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signum</td><td>The signal number received</td></tr>
  </table>
  </dd>
</dl>
<p>This function is registered as the handler for SIGINT signals and calls <a class="el" href="#a32c1402c1491ea6c063e45c1c5a57f10">handle_exit()</a> to terminate the server gracefully. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="server__runner_8cpp_a5b3210a63df1873c78a11917bce26ff1_cgraph.png" border="0" usemap="#aserver__runner_8cpp_a5b3210a63df1873c78a11917bce26ff1_cgraph" alt=""/></div>
<map name="aserver__runner_8cpp_a5b3210a63df1873c78a11917bce26ff1_cgraph" id="aserver__runner_8cpp_a5b3210a63df1873c78a11917bce26ff1_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,99,32"/>
<area shape="rect" href="server__runner_8cpp.html#a32c1402c1491ea6c063e45c1c5a57f10" title=" " alt="" coords="147,5,234,32"/>
<area shape="poly" title=" " alt="" coords="99,16,131,16,131,21,99,21"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="server__runner_8cpp.html">server_runner.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
