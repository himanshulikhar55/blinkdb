<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BLINKDB-Engine: skiplist Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BLINKDB-Engine<span id="projectnumber">&#160;0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classskiplist.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classskiplist-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">skiplist Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9751bd1be5d110bb38e5cb4a42c172c7" id="r_a9751bd1be5d110bb38e5cb4a42c172c7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9751bd1be5d110bb38e5cb4a42c172c7">skiplist</a> (int maxLvl=16, float prob=0.5)</td></tr>
<tr class="memdesc:a9751bd1be5d110bb38e5cb4a42c172c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a new skiplist object.  <br /></td></tr>
<tr class="separator:a9751bd1be5d110bb38e5cb4a42c172c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa193aa8a10a77cbf6bddca202b5c253a" id="r_aa193aa8a10a77cbf6bddca202b5c253a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa193aa8a10a77cbf6bddca202b5c253a">insert</a> (const std::string &amp;key, std::streampos offset)</td></tr>
<tr class="memdesc:aa193aa8a10a77cbf6bddca202b5c253a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a new node with the given key and stream offset into the skip list.  <br /></td></tr>
<tr class="separator:aa193aa8a10a77cbf6bddca202b5c253a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1d31fd7a91a970ce89658791be4872e" id="r_aa1d31fd7a91a970ce89658791be4872e"><td class="memItemLeft" align="right" valign="top">std::streampos&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1d31fd7a91a970ce89658791be4872e">get_nearest_offset</a> (const std::string &amp;key)</td></tr>
<tr class="memdesc:aa1d31fd7a91a970ce89658791be4872e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the stream offset of the node immediately preceding the given key.  <br /></td></tr>
<tr class="separator:aa1d31fd7a91a970ce89658791be4872e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9751bd1be5d110bb38e5cb4a42c172c7" name="a9751bd1be5d110bb38e5cb4a42c172c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9751bd1be5d110bb38e5cb4a42c172c7">&#9670;&#160;</a></span>skiplist()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">skiplist::skiplist </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>maxLvl</em></span><span class="paramdefsep"> = </span><span class="paramdefval">16</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>prob</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0.5</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a new skiplist object. </p>
<p>Initializes the skiplist with a specified maximum level and probability. A header node is created with an empty key and a placeholder value (-1) using the provided maximum level.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">maxLvl</td><td>The maximum level allowed in the skiplist (default is 16). This cannot be changed currently. </td></tr>
    <tr><td class="paramname">prob</td><td>The probability used for level promotion of nodes (default is 0.5). This cannot be changed currently. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa1d31fd7a91a970ce89658791be4872e" name="aa1d31fd7a91a970ce89658791be4872e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1d31fd7a91a970ce89658791be4872e">&#9670;&#160;</a></span>get_nearest_offset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::streampos skiplist::get_nearest_offset </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>key</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the stream offset of the node immediately preceding the given key. </p>
<p>This function traverses the skip list from the top-most level down to the lowest level, moving forward at each level until it finds the last node whose key is less than the specified key. The function then returns the offset of this node within the stream.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The key to search for in the skip list.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::streampos The offset of the node with the largest key that is less than the input key.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If no node with a key less than the provided key exists, the offset of the head node is returned. </dd></dl>

</div>
</div>
<a id="aa193aa8a10a77cbf6bddca202b5c253a" name="aa193aa8a10a77cbf6bddca202b5c253a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa193aa8a10a77cbf6bddca202b5c253a">&#9670;&#160;</a></span>insert()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void skiplist::insert </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>key</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::streampos</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inserts a new node with the given key and stream offset into the skip list. </p>
<p>This function navigates the skip list from the highest level down to level 0 to find the appropriate insertion point for the new node. It maintains arrays of predecessor and successor nodes for each level during the traversal. A new random level is determined for the node, and the node is inserted into each level using atomic operations to ensure thread safety.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The key associated with the new node; used for maintaining order within the list. </td></tr>
    <tr><td class="paramname">offset</td><td>The stream offset associated with the key, typically representing a position or location in an external data source. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="skiplist_8h.html">skiplist.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classskiplist.html">skiplist</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
