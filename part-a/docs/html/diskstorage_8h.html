<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BLINKDB-Engine: diskstorage.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BLINKDB-Engine<span id="projectnumber">&#160;0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('diskstorage_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle"><div class="title">diskstorage.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &quot;<a class="el" href="sparseindex_8h.html">sparseindex.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for diskstorage.h:</div>
<div class="dyncontent">
<div class="center"><img src="diskstorage_8h__incl.png" border="0" usemap="#adiskstorage_8h" alt=""/></div>
<map name="adiskstorage_8h" id="adiskstorage_8h">
<area shape="rect" title=" " alt="" coords="114,5,213,32"/>
<area shape="rect" title=" " alt="" coords="5,229,77,256"/>
<area shape="poly" title=" " alt="" coords="159,34,57,217,53,215,154,31"/>
<area shape="rect" title=" " alt="" coords="283,80,348,107"/>
<area shape="poly" title=" " alt="" coords="191,30,276,70,274,75,189,35"/>
<area shape="rect" title=" " alt="" coords="101,229,154,256"/>
<area shape="poly" title=" " alt="" coords="162,33,148,81,137,153,132,214,126,214,131,152,142,79,157,31"/>
<area shape="rect" href="sparseindex_8h.html" title=" " alt="" coords="156,80,259,107"/>
<area shape="poly" title=" " alt="" coords="174,31,194,65,190,68,169,34"/>
<area shape="rect" href="skiplist_8h.html" title=" " alt="" coords="171,155,244,181"/>
<area shape="poly" title=" " alt="" coords="210,107,210,139,205,139,205,107"/>
<area shape="poly" title=" " alt="" coords="180,184,85,225,83,220,178,179"/>
<area shape="poly" title=" " alt="" coords="196,184,154,221,151,217,192,180"/>
<area shape="rect" title=" " alt="" coords="179,229,236,256"/>
<area shape="poly" title=" " alt="" coords="210,182,210,214,205,214,205,182"/>
<area shape="rect" title=" " alt="" coords="261,229,325,256"/>
<area shape="poly" title=" " alt="" coords="224,180,269,217,265,221,221,184"/>
<area shape="rect" title=" " alt="" coords="350,229,402,256"/>
<area shape="poly" title=" " alt="" coords="238,179,336,221,334,226,236,184"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="diskstorage_8h__dep__incl.png" border="0" usemap="#adiskstorage_8hdep" alt=""/></div>
<map name="adiskstorage_8hdep" id="adiskstorage_8hdep">
<area shape="rect" title=" " alt="" coords="58,5,157,32"/>
<area shape="rect" href="hashtable_8h.html" title=" " alt="" coords="64,80,152,107"/>
<area shape="poly" title=" " alt="" coords="110,48,110,80,105,80,105,48"/>
<area shape="rect" href="blinkdb_8h.html" title=" " alt="" coords="71,155,144,181"/>
<area shape="poly" title=" " alt="" coords="110,122,110,154,105,154,105,122"/>
<area shape="rect" href="blinkdb__client_8h.html" title=" " alt="" coords="5,229,117,256"/>
<area shape="poly" title=" " alt="" coords="94,196,71,230,67,227,89,193"/>
<area shape="rect" href="client__runner_8cpp.html" title=" " alt="" coords="48,304,167,331"/>
<area shape="poly" title=" " alt="" coords="122,195,132,229,132,250,129,271,116,305,111,303,124,270,127,250,126,230,117,197"/>
<area shape="poly" title=" " alt="" coords="80,268,102,302,97,305,75,271"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdiskstorage.html">diskstorage</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab39fec97d85960796efedec442f38004" id="r_ab39fec97d85960796efedec442f38004"><td class="memItemLeft" align="right" valign="top"><a id="ab39fec97d85960796efedec442f38004" name="ab39fec97d85960796efedec442f38004"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>INTERVAL</b>&#160;&#160;&#160;100</td></tr>
<tr class="separator:ab39fec97d85960796efedec442f38004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d3fef197146b932f5ad01fce683a66b" id="r_a6d3fef197146b932f5ad01fce683a66b"><td class="memItemLeft" align="right" valign="top"><a id="a6d3fef197146b932f5ad01fce683a66b" name="a6d3fef197146b932f5ad01fce683a66b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LOGFILE</b>&#160;&#160;&#160;&quot;data.log&quot;</td></tr>
<tr class="separator:a6d3fef197146b932f5ad01fce683a66b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides the diskstorage class for disk-based storage of key-value pairs.</p>
<p>This file defines the diskstorage class, which allows writing key-value pairs to a log file in an append-only mode and reading them back by leveraging a sparse indexing mechanism provided by the sparseindex class.</p>
<p>The diskstorage class manages an output file stream that is used to append data to the file "data.log". Every INTERVAL number of insertions, it updates the sparse index with the offset position of the key within the file. The read() member function uses the sparse index to retrieve and search for key-value entries efficiently.</p>
<p>Usage Example: </p><div class="fragment"><div class="line"><a class="code hl_class" href="classdiskstorage.html">diskstorage</a> ds;</div>
<div class="line"><a class="code hl_class" href="classsparseindex.html">sparseindex</a> index;</div>
<div class="line">ds.<a class="code hl_function" href="classdiskstorage.html#a5cd280ffdc039f12c75f26ba325ec455">write</a>(<span class="stringliteral">&quot;sampleKey&quot;</span>, <span class="stringliteral">&quot;sampleValue&quot;</span>, index);</div>
<div class="line">std::string value = ds.<a class="code hl_function" href="classdiskstorage.html#a2a6d4004689c9c8084f0c07d4f49b191">read</a>(<span class="stringliteral">&quot;sampleKey&quot;</span>, index);</div>
<div class="ttc" id="aclassdiskstorage_html"><div class="ttname"><a href="classdiskstorage.html">diskstorage</a></div><div class="ttdef"><b>Definition</b> diskstorage.h:39</div></div>
<div class="ttc" id="aclassdiskstorage_html_a2a6d4004689c9c8084f0c07d4f49b191"><div class="ttname"><a href="classdiskstorage.html#a2a6d4004689c9c8084f0c07d4f49b191">diskstorage::read</a></div><div class="ttdeci">std::string read(const std::string &amp;key, sparseindex &amp;sparseIndex)</div><div class="ttdef"><b>Definition</b> diskstorage.h:90</div></div>
<div class="ttc" id="aclassdiskstorage_html_a5cd280ffdc039f12c75f26ba325ec455"><div class="ttname"><a href="classdiskstorage.html#a5cd280ffdc039f12c75f26ba325ec455">diskstorage::write</a></div><div class="ttdeci">bool write(const std::string &amp;key, const std::string &amp;value, sparseindex &amp;sparseIndex)</div><div class="ttdef"><b>Definition</b> diskstorage.h:66</div></div>
<div class="ttc" id="aclasssparseindex_html"><div class="ttname"><a href="classsparseindex.html">sparseindex</a></div><div class="ttdef"><b>Definition</b> sparseindex.h:29</div></div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="sparseindex_8h.html">sparseindex.h</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c85d3e3c5052e9ad9ce18c6863244a25.html">lib</a></li><li class="navelem"><a class="el" href="diskstorage_8h.html">diskstorage.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
